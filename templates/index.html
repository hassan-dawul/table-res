{% extends "base.html" %}

{% block content %}

<!-- HERO SECTION -->
<div class="container my-5">
  <div class="row p-4 pb-0 pe-lg-0 pt-lg-5 align-items-center rounded-3 border shadow-lg">
    <div class="col-lg-7 p-3 p-lg-5 pt-lg-3">
      <h1 id="hero-title" class="display-4 fw-bold lh-1 text-body-emphasis">
      </h1>
      <p id="hero-desc" class="lead">
        ููุตูุฉ ุชุนุฑูููุฉ ุชุฌูุน ุฃูุถู ุงููุทุงุนู ูุชุจุณูุท ุทุฑููู ููุญุฌุฒ ุนุจุฑ ุดุฑูุงุฆูุง. ุงุณุชูุดู ุญุณุจ ุงููุฏููุฉ ูุงููุทุจุฎ ูุงูููุฒุงููุฉ.
      </p>
      <div class="d-grid gap-2 d-md-flex justify-content-md-start mb-4 mb-lg-3">
        <button id="explore-btn" type="button" class="btn btn-primary btn-lg px-4 me-md-2 fw-bold"
                onclick="window.location.href='/restaurants_page'">
          ุงุณุชูุดู ุงููุทุงุนู
        </button>
      </div>
    </div>
    <div class="col-lg-4">
      <img class="rounded-lg-3 img-fluid" src="/static/hero.svg" alt="Hero" width="auto" />
    </div>
  </div>
</div>

<!-- ABOUT SECTION -->
<section class="brand-bg">
  <div class="container px-4 py-5">
    <h2 id="about-section-title" class="pb-2 border-bottom text-body-emphasis">ูู ูุญูุ</h2>
    <div class="row row-cols-1 row-cols-md-2 align-items-md-center g-5 py-5">
      <div class="col d-flex flex-column align-items-start gap-2">
        <h2 id="about-title" class="fw-bold text-body-emphasis">ูุญู ููุตุฉ ุชูุฏู ูุชุณููู ุนูููุฉ ุงูุชุดุงู ูุญุฌุฒ ุงููุทุงุนู</h2>
        <p id="about-desc" class="text-body-secondary">
          ูููุฑ ูู ุชุฌุฑุจุฉ ุณูุณุฉ ูุงุณุชูุดุงู ุงููุทุงุนู ุงูููุงุณุจุฉ ููุ ูุน ุฅููุงููุฉ ุงูุญุฌุฒ ุงูููุฑู.
        </p>
        <a id="book-now-btn" href="#" class="btn btn-primary btn-lg">ุงุญุฌุฒ ุงูุขู</a>
      </div>
      <div class="col">
        <div class="row row-cols-1 row-cols-sm-2 g-4">
          <div class="col d-flex flex-column gap-2">
            <h4 id="feature1-title" class="fw-semibold mb-0 text-body-emphasis">ูุงุฌูุฉ ุณููุฉ</h4>
            <p id="feature1-desc" class="text-body-secondary">
              ุตูููุง ููุตุชูุง ุจูุงุฌูุฉ ุงุณุชุฎุฏุงู ุจุณูุทุฉ ูุณููุฉุ ูุชููุญู ุชุฌุฑุจุฉ ูุฑูุญุฉ ูุณุฑูุนุฉ.
            </p>
          </div>

          <div class="col d-flex flex-column gap-2">
            <h4 id="feature2-title" class="fw-semibold mb-0 text-body-emphasis">ูุนูููุงุช ุฏูููุฉ</h4>
            <p id="feature2-desc" class="text-body-secondary">
              ูููุฑ ูู ูุนูููุงุช ุฏูููุฉ ููุญุฏุซุฉ ุนู ูู ูุทุนูุ ุชุดูู ูุงุฆูุฉ ุงูุทุนุงูุ ุงูุฃุณุนุงุฑุ ุณุงุนุงุช ุงูุนููุ ูุงููููุน.
            </p>
          </div>

          <div class="col d-flex flex-column gap-2">
            <h4 id="feature3-title" class="fw-semibold mb-0 text-body-emphasis">ุดุฑุงูุงุช</h4>
            <p id="feature3-desc" class="text-body-secondary">
              ุดุฑุงูุงุชูุง ูุน ุฃูุซุฑ ูู 2000 ูุทุนู ุชุชูุญ ููุง ุนุฑุถ ูุนูููุงุช ุฏูููุฉ ูุชุฃููุฏ ุงูุญุฌูุฒุงุช ุจุดูู ููุฑู.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<div class="container px-4 py-5" id="hanging-icons">
  <h2 id="how-it-works-title" class="pb-2 border-bottom text-center">ููู ุชุนูู ุงูุฎุฏูุฉุ</h2>
  <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
    <div class="col d-flex align-items-start">
      <div>
        <h3 id="step1-title" class="fs-2 text-body-emphasis">ุงุณุชูุดู</h3>
        <p id="step1-desc">ุงุณุชูุดู ุฃูุถู ุงููุทุงุนู ุญููู ุจูู ุณูููุฉุ ูุน ุชูุงุตูู ุฏูููุฉ ุชุณุงุนุฏู ุนูู ุงุชุฎุงุฐ ุงููุฑุงุฑ ุงูุตุญูุญ.</p>
      </div>
    </div>
    <div class="col d-flex align-items-start">
      <div>
        <h3 id="step2-title" class="fs-2 text-body-emphasis">ุงุฎุชุฑ</h3>
        <p id="step2-desc">ุงุฎุชุฑ ุงููุทุนู ุงูุฐู ููุงุณุจ ุฐููู ูุงุญุชูุงุฌุงุชู ูู ุจูู ูุฆุงุช ุงูุฎูุงุฑุงุช ุงููุตููุฉ ูุงูููุซููุฉ.</p>
      </div>
    </div>
    <div class="col d-flex align-items-start">
      <div>
        <h3 id="step3-title" class="fs-2 text-body-emphasis">ุงุญุฌุฒ ุนุจุฑ ุดุฑูู</h3>
        <p id="step3-desc">ุงุญุฌุฒ ุทุงููุชู ูุจุงุดุฑุฉ ุนุจุฑ ุดุฑูููุง ุจูู ุณุฑุนุฉ ูุฃูุงูุ ูุงุณุชูุชุน ุจุชุฌุฑุจุฉ ุฎุงููุฉ ูู ุงูุชุนููุฏ.</p>
      </div>
    </div>
  </div>
</div>

<!-- RESTAURANTS SECTION -->
<section class="brand-bg py-5" id="restaurants-section">
  <div class="container">
    <h2 id="restaurants-title" class="mb-4 text-center">ุงููุทุงุนู ุงููุชุงุญุฉ</h2>
    <div id="restaurants-container" class="row g-4"></div>
    <div class="text-center mt-4">
        <a id="more-restaurants-btn" href="/restaurants_page" class="btn btn-primary btn-lg">ุงููุฒูุฏ ูู ุงููุทุงุนู</a>
    </div>
  </div>
</section>

<!-- TAGS / CATEGORIES -->
<section class="cta-section text-center py-5 bg-light">
  <div class="container">
    <h2 id="tags-title" class="mb-4">ุชุนุฑูู ุนูู ุฎูุงุฑุงุชู</h2>
    <div class="chips" id="city-chips">
      <!-- ุงูุฃุฒุฑุงุฑ ุณุชูุถุงู ููุง ุฏููุงูููููุง -->
    </div>
  </div>
</section>

<!-- CTA SECTION -->
<section class="cta-section text-center py-5 brand-bg">
  <div class="container">
    <h2 id="cta-title" class="mb-4">ุฌุงูุฒ ูุงูุชุดุงู ูุทุนูู ุงููุงุฏูุ</h2>
    <a id="contact-btn" href="/contact" class="btn btn-primary btn-lg">ุชูุงุตู ูุนูุง</a>
  </div>
</section>

<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
  $(document).ready(function() {
    const lang = localStorage.getItem('site-lang')
    const endpoint = '/restaurants?limit=3&lang=' + lang;
    $.ajax({
      url: endpoint,
      method: 'GET',
      dataType: 'json',
      success: function(data) {
        $('#restaurants-container').empty();
        $.each(data.data, function(index, r) {
          const cardHtml = `
          <div class="col-md-4">
            <div class="card shadow-sm rounded">
              <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-1 fw-bold">${r.name}</h5>
                <small>${r.cuisine}</small>
              </div>
              <div class="card-body">
                                         <p class="mb-1"><strong>${document.getElementById('location')?.textContent || 'ุงููููุน'}:</strong> ${r.area }</p>
                         <p class="mb-1"><strong>${document.getElementById('hours')?.textContent || 'ุณุงุนุงุช ุงูุนูู'}:</strong> ${r.opens_at} - ${r.closes_at}</p>
                        <p><strong>${document.getElementById('capacity')?.textContent || 'ุงูุณุนุฉ'}:</strong> ${r.capacity} ${document.getElementById('guests')?.textContent || 'ุถูู'}</p>
                        <p><strong>${document.getElementById('todayBookingsLabel')?.textContent || 'ุนุฏุฏ ุงูุญุฌุฒ ุงูููู'}:</strong> ${r.today_bookings}</p>


                        </div>
                                <div class="card-footer text-center">
                          <button class="btn btn-warning fw-bold" onclick="window.location.href='/booking/${r.id}'">
                ${document.getElementById('bookNow')?.textContent || 'ุงุญุฌุฒ ุงูุขู'}

              </div>
            </div>
          </div>`;
          $('#restaurants-container').append(cardHtml);
        });
      },
      error: function(xhr, status, error) {
        $('#restaurants-container').html(`
          <div class="alert alert-danger text-center">
            <p>โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงููุทุงุนู.</p>
            <p><strong>ุงูุญุงูุฉ:</strong> ${status}</p>
            <p><strong>ุงูุฑุณุงูุฉ:</strong> ${error}</p>
          </div>
        `);
      }
    });

  });

  document.addEventListener("DOMContentLoaded", async () => {
    const chipsContainer = document.getElementById("city-chips");
    const lang = localStorage.getItem('site-lang') || 'ar';

    try {
        const response = await fetch("/cities?lang=" + lang);
        const result = await response.json();

        chipsContainer.innerHTML = ""; // ูุณุญ ุงูุฃุฒุฑุงุฑ ุงููุฏููุฉ
        (result.data || []).forEach(city => {
            const btn = document.createElement("button");
            btn.className = "btn btn-primary";
            btn.textContent = city;
            chipsContainer.appendChild(btn);
        });

    } catch (error) {
        console.error("ุฎุทุฃ ูู ุฌูุจ ุงููุฏู:", error);
        chipsContainer.innerHTML = "<p>ุชุนุฐุฑ ุชุญููู ุงููุฏู.</p>";
    }
});


</script>

<!-- ๐น ุนูุงุตุฑ ุงูุชุฑุฌูุฉ ุงููุฎููุฉ ูููุทุงุนู -->
<p class="d-none" id="location"></p>
<p class="d-none" id="hours"></p>
<p class="d-none" id="capacity"></p>
<p class="d-none" id="bookNow"></p>
<p class="d-none" id="guests"></p>
<p class="d-none" id="todayBookingsLabel"></p>
<div class="row" id="restaurants-container"></div>




{% endblock %}
